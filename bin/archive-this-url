#!/usr/bin/env perl
use v5.18;

use FindBin;
use lib "$FindBin::Bin/../lib";

use Diversion::UrlArchiver;
use IO::All;

my @feeds;
my $feed_url = shift or die "Missing URL in arg";
if (-f $feed_url) {
    @feeds = grep { s/\s//g; $_ } io($feed_url)->chomp->getlines;
} else {
    push @feeds, $feed_url;
}

my $archiver = Diversion::UrlArchiver->new;
for my $url (@feeds) {
    $archiver->get($url);
}
